<!DOCTYPE html>
<html>
<head>
@@include("common/header.html", { 
    "title": "@@appname" 
})
<style>
#post1 {
    width:160px;
}
</style>
</head>
<body>

@@include("common/actions.html")

<div class="my-app">

@@include("pagecard/navdrawer.html")

<div class="ckd-page-card" id="ckDefault">

    @@include("common/page_parts.html", { 
        "title": "Control"
    })

    <div class="ckd-list-card" data-style="menu">
        <header class="ckd-hd">Source code</header>
        <div class="ckd-item">
            <a class="ckd-title" href="https://github.com/douban-f2e/CardKit/blob/master/cardkit/ui/control.js" target="_blank">cardkit/ui/control</a>
            <span class="ckd-desc">`require('cardkit').control`</span>
        </div>
        <div class="ckd-item">
            <a class="ckd-title" href="https://github.com/dexteryy/moui/blob/master/control.js" target="_blank">moui/control</a>
            <span class="ckd-desc">The original class</span>
        </div>
        <div class="ckd-item">
            <a class="ckd-title" href="https://github.com/douban-f2e/CardKit/blob/master/scss/cardkit/active/_control.scss" target="_blank">scss/cardkit/active/_control.scss</a>
            <span class="ckd-desc">Skin</span>
        </div>
        <div class="ckd-item">
            <a class="ckd-title" href="https://github.com/douban-f2e/cardkit-demo-gallery/blob/master/docs/control.html" target="_blank">cardkit-demo-gallery/docs/control.html</a>
            <span class="ckd-desc">The current page</span>
        </div>
    </div>

    <div class="ckd-box-card" data-cfg-paper="true">
        <header class="ckd-hd"><span id="usages">Usages</span></header>
    </div>

    <div class="ck-box-unit" data-cfg-plain="true">
        <header class="ckd-hd">Switch</header>
    </div>

    <div class="ck-form-unit">
        <header class="ckd-hd">Examples</header>
        <div class="ckd-item">
            <p>
<!--demo-->
<button type="button" class="ck-switch demo" id="switch1" 
        value="0" 
        data-enable-url="api/enable.txt"
        data-enable-method="get"
        data-enable-val="1"
        data-label="false">
    <span class="enable-text">开启</span>
    <span class="disable-text">关闭</span>
    <span class="block"></span>
</button>
<!--demo end-->
            </p>
            @@include("common/show_html.html")
            @@include("common/show_js.html", {
                "source": "jsForAllDemo" 
            })
        </div>
    </div>

    <div class="ck-box-unit" data-cfg-plain="true">
        <header class="ckd-hd">Post button</header>
    </div>

    <div class="ck-form-unit">
        <header class="ckd-hd">Examples</header>
        <div class="ckd-item">
<!--demo-->
<input type="button" class="ck-post-button demo" id="post1"
    value="Get JSON data" 
    data-request-method="get"
    data-enable-json-url="api/form.json"
    data-enable-method="get"
    data-enable-label="Get JSON (success!)">
<!--demo end-->
            <p>
                <label><em>fixed width, json response</em></label>
            </p>
            @@include("common/show_html.html")
            @@include("common/show_js.html", {
                "source": "jsForAllDemo" 
            })
        </div>
        <div class="ckd-item">
<!--demo-->
<button type="button" class="ck-post-button demo" id="post2"
        data-style="big"
        data-fluid="true"
        data-enable-url="api/enable.txt"
        data-enable-method="get"
        data-enable-label="Thanks!" 
        data-label="span">
    <span>Favor!</span>
</button>
<!--demo end-->
            <p>
                <label><em>default width</em></label>
            </p>
            @@include("common/show_html.html")
            @@include("common/show_js.html", {
                "source": "jsForAllDemo" 
            })
        </div>
        <div class="ckd-item">
<!--demo-->
<span class="ck-post-button demo" id="post3"
        data-label=".text"
        data-num-field=".num span"
        data-enable-label="Cancel vote"
        data-enable-url="api/enable.txt"
        data-disable-url="api/disable.txt"
        data-enable-method="get"
        data-disable-method="get"
        data-fluid="true"
        data-is-default="true">
    <span class="text">Vote!</span>
    <span class="num">(<span>7</span>)</span>
</span>
<script type="text/darkscript">
var me = this;
require([
    'dollar', 
    'show-result'
], function($, show_result){
    $(me).on('darkdom:rendered', init_events);
    init_events();
    function init_events(){
        $('#post3').on('control:enable', show_result)
            .on('control:disable', show_result);
    }
});
</script>
<!--demo end-->
            <p>
                <label><em>fluid width, with number, can disable</em></label>
            </p>
            @@include("common/show_html.html")
        </div>
        <div class="ckd-item">
<!--demo-->
<a href="#" class="ck-post-button demo" id="post4"
    data-enable-label="Button Link (clicked)" 
    data-is-danger="true"
    data-fluid="true">Button Link</a>
<!--demo end-->
            <p>
                <label><em>fluid width, link element</em></label>
            </p>
            @@include("common/show_html.html")
        </div>
    </div>

    <div class="ck-box-unit" data-cfg-plain="true">
        <header class="ckd-hd">Post Link</header>
    </div>

    <div class="ck-form-unit">
        <header class="ckd-hd">Examples</header>
        <div class="ckd-item">
            <p>text text text text text text text 
<!--demo-->
<a href="#" class="ck-post-link demo" id="link1"
    data-enable-label="Post Link (clicked)" 
    data-enable-method="get"
    data-enable-url="api/enable.txt"
>Post Link</a>
<!--demo end-->
            text text text text text text text text text text text text text text text</p>
            @@include("common/show_html.html")
            @@include("common/show_js.html", {
                "source": "jsForAllDemo" 
            })
        </div>
    </div>

    <div class="ck-box-unit" data-cfg-plain="true">
        <header class="ckd-hd">Folder</header>
    </div>

    <div class="ck-form-unit">
        <header class="ckd-hd">Examples</header>
        <div class="ckd-item">
<!--demo-->
<div class="ck-folder demo" id="folder1"
        data-enable-label="Fold me!" 
        data-label="header">
    <header>Unfold me!</header>
    <div class="content">Hidden content. Hidden content. Hidden content. Hidden content.</div>
</div>
<!--demo end-->
            @@include("common/show_html.html")
        </div>
    </div>

</div>

<div class="ckd-page-card" id="optionsCard">
    @@include("common/subpage_parts.html", { 
        "title": "Options"
    })
</div>

@@include("common/common_pages.html")

</div>

@@include("common/footer.html")

<script id="jsForAllDemo">
define('show-result', ['cardkit'], function(ck){
    return function(e){
        var result = e.component.responseData;
        console.info('response: ', result);
        ck.notify('response: ' + result);
    };
});

require([
    'dollar',
    'cardkit',
    'show-result'
], function($, ck, show_result){
    ck.darkDelegate.on('control:enable', {
        '#switch1': show_result,
        '#post1': show_result,
        '#post2': show_result,
        '#link1': show_result
    });
});
</script>
</body>
</html>
