<!DOCTYPE html>
<html>
<head>
@@include("common/header.html", { 
    "title": "@@appname" 
})
<style>
#post1 {
    width:160px;
}
</style>
</head>
<body>

@@include("common/actions.html")

<div class="my-app">

@@include("pagecard/navdrawer.html")

<ck-card type="page" id="ckDefault">

    @@include("common/page_parts.html", { 
        "title": "Control"
    })

    <ck-card type="list" subtype="menu">
        <ck-part type="hd">Source code</ck-part>
        <ck-part type="item">
            <ck-part type="title" href="https://github.com/douban-f2e/CardKit/blob/master/cardkit/ui/control.js" target="_blank">cardkit/ui/control</ck-part>
            <ck-part type="desc">`require('cardkit').control`</ck-part>
        </ck-part>
        <ck-part type="item">
            <ck-part type="title" href="https://github.com/dexteryy/moui/blob/master/control.js" target="_blank">moui/control</ck-part>
            <ck-part type="desc">The original class</ck-part>
        </ck-part>
        <ck-part type="item">
            <ck-part type="title" href="https://github.com/douban-f2e/CardKit/blob/master/scss/cardkit/active/_control.scss" target="_blank">scss/cardkit/active/_control.scss</ck-part>
            <ck-part type="desc">Skin</ck-part>
        </ck-part>
        <ck-part type="item">
            <ck-part type="title" href="https://github.com/douban-f2e/cardkit-demo-gallery/blob/master/docs/control.html" target="_blank">cardkit-demo-gallery/docs/control.html</ck-part>
            <ck-part type="desc">The current page</ck-part>
        </ck-part>
    </ck-card>

    <ck-card type="box" paper-style="true">
        <ck-part type="hd"><span id="usages">Usages</span></ck-part>
    </ck-card>

    <ck-card type="box" plain-style="true">
        <ck-part type="hd">Switch</ck-part>
    </ck-card>

    <ck-card type="form">
        <ck-part type="hd">Examples</ck-part>
        <ck-part type="item">
            <p>
<!--demo-->
<button type="button" class="ck-switch demo" id="switch1" 
        value="0" 
        data-enable-url="api/enable.html"
        data-enable-method="get"
        data-enable-val="1"
        data-label="false">
    <span class="enable-text">开启</span>
    <span class="disable-text">关闭</span>
    <span class="block"></span>
</button>
<!--demo end-->
            </p>
            @@include("common/show_html.html")
            @@include("common/show_js.html", {
                "source": "#jsForAllDemo" 
            })
        </ck-part>
    </ck-card>

    <ck-card type="box" plain-style="true">
        <ck-part type="hd">Post button</ck-part>
    </ck-card>

    <ck-card type="form">
        <ck-part type="hd">Examples</ck-part>
        <ck-part type="item">
<!--demo-->
<input type="button" class="ck-post-button demo" id="post1"
    value="Get JSON data" 
    data-request-method="get"
    data-enable-json-url="api/form_json.html"
    data-enable-method="get"
    data-enable-label="Get JSON (success!)">
<!--demo end-->
            <p>
                <label><em>fixed width, json response</em></label>
            </p>
            @@include("common/show_html.html")
            @@include("common/show_js.html", {
                "source": "#jsForAllDemo" 
            })
        </ck-part>
        <ck-part type="item">
<!--demo-->
<button type="button" class="ck-post-button demo" id="post2"
        data-style="big"
        data-fluid="true"
        data-enable-url="api/enable.html"
        data-enable-method="get"
        data-enable-label="Thanks!" 
        data-label="span">
    <span>Favor!</span>
</button>
<!--demo end-->
            <p>
                <label><em>default width</em></label>
            </p>
            @@include("common/show_html.html")
            @@include("common/show_js.html", {
                "source": "#jsForAllDemo" 
            })
        </ck-part>
        <ck-part type="item">
<!--demo-->
<span class="ck-post-button" id="post3"
        data-label=".text"
        data-num-field=".num span"
        data-enable-label="Cancel vote"
        data-enable-url="api/enable.html"
        data-disable-url="api/disable.html"
        data-enable-method="get"
        data-disable-method="get"
        data-fluid="true"
        data-is-default="true">
    <span class="text">Vote!</span>
    <span class="num">(<span>7</span>)</span>
</span>
<script type="text/darkscript">
var me = this;
require([
    'dollar', 
    'show-result'
], function($, show_result){
    $(me).on('darkdom:rendered', init_events);
    init_events();
    function init_events(){
        $('#post3').on('control:enable', show_result)
            .on('control:disable', show_result);
    }
});
</script>
<!--demo end-->
            <p>
                <label><em>fluid width, with number, can disable</em></label>
            </p>
            @@include("common/show_html.html")
        </ck-part>
        <ck-part type="item">
<!--demo-->
<a href="#" class="ck-post-button demo" id="post4"
    data-enable-label="Button Link (clicked)" 
    data-is-danger="true"
    data-fluid="true">Button Link</a>
<!--demo end-->
            <p>
                <label><em>fluid width, link element</em></label>
            </p>
            @@include("common/show_html.html")
        </ck-part>
    </ck-card>

    <ck-card type="box" plain-style="true">
        <ck-part type="hd">Post Link</ck-part>
    </ck-card>

    <ck-card type="form">
        <ck-part type="hd">Examples</ck-part>
        <ck-part type="item">
            <p>text text text text text text text 
<!--demo-->
<a href="#" class="ck-post-link demo" id="link1"
    data-enable-label="Post Link (clicked)" 
    data-enable-method="get"
    data-enable-url="api/enable.html"
>Post Link</a>
<!--demo end-->
            text text text text text text text text text text text text text text text</p>
            @@include("common/show_html.html")
            @@include("common/show_js.html", {
                "source": "#jsForAllDemo" 
            })
        </ck-part>
    </ck-card>

    <ck-card type="box" plain-style="true">
        <ck-part type="hd">Folder</ck-part>
    </ck-card>

    <ck-card type="form">
        <ck-part type="hd">Examples</ck-part>
        <ck-part type="item">
<!--demo-->
<div class="ck-folder demo" id="folder1"
        data-enable-label="Fold me!" 
        data-label="header">
    <header>Unfold me!</header>
    <div class="content">Hidden content. Hidden content. Hidden content. Hidden content.</div>
</div>
<!--demo end-->
            @@include("common/show_html.html")
        </ck-part>
    </ck-card>

    @@include("common/default_page_footer.html")

</ck-card>

@@include("common/common_pages.html")

</div>

@@include("common/footer.html")

<script id="jsForAllDemo">
define('show-result', ['cardkit'], function(ck){
    return function(e){
        var result = e.component.responseData;
        console.info('response: ', result);
        ck.notify('response: ' + result);
    };
});

require([
    'dollar',
    'cardkit',
    'show-result'
], function($, ck, show_result){
    ck.darkDelegate.on('control:enable', {
        '#switch1': show_result,
        '#post1': show_result,
        '#post2': show_result,
        '#link1': show_result
    });
});
</script>
</body>
</html>

